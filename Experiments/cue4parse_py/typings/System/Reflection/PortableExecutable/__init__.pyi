from __future__ import annotations
from typing import Any, List, Dict, Optional, overload, TypeVar, Generic, Tuple
import enum, System, CUE4Parse
T = TypeVar('T')
class Lazy(Generic[T]): value: T
Nullable = Optional

class ManagedPEBuilder(System.Reflection.PortableExecutable.PEBuilder):
    def __init__(self, header: 'System.Reflection.PortableExecutable.PEHeaderBuilder', metadataRootBuilder: 'System.Reflection.Metadata.Ecma335.MetadataRootBuilder', ilStream: 'System.Reflection.Metadata.BlobBuilder', mappedFieldData: 'System.Reflection.Metadata.BlobBuilder', managedResources: 'System.Reflection.Metadata.BlobBuilder', nativeResources: 'System.Reflection.PortableExecutable.ResourceSectionBuilder', debugDirectoryBuilder: 'System.Reflection.PortableExecutable.DebugDirectoryBuilder', strongNameSignatureSize: 'int', entryPoint: 'System.Reflection.Metadata.MethodDefinitionHandle', flags: 'System.Reflection.PortableExecutable.CorFlags', deterministicIdProvider: 'System.Func[List[System.Reflection.Metadata.Blob], System.Reflection.Metadata.BlobContentId]') -> None: ...
    ManagedResourcesDataAlignment: 'int' = ...
    MappedFieldDataAlignment: 'int' = ...
    def Sign(self, peImage: 'System.Reflection.Metadata.BlobBuilder', signatureProvider: 'System.Func[List[System.Reflection.Metadata.Blob], List[int]]') -> None: ...

class PEBuilder:
    Header: 'System.Reflection.PortableExecutable.PEHeaderBuilder' = ...
    IdProvider: 'System.Func[List[System.Reflection.Metadata.Blob], System.Reflection.Metadata.BlobContentId]' = ...
    IsDeterministic: 'bool' = ...
    def Serialize(self, builder: 'System.Reflection.Metadata.BlobBuilder') -> 'System.Reflection.Metadata.BlobContentId': ...

class DebugDirectoryBuilder:
    def __init__(self) -> None: ...
    @overload
    def AddEntry(self, type: 'System.Reflection.PortableExecutable.DebugDirectoryEntryType', version: 'System.UInt32', stamp: 'System.UInt32') -> None: ...
    @overload
    def AddEntry(self, type: 'System.Reflection.PortableExecutable.DebugDirectoryEntryType', version: 'System.UInt32', stamp: 'System.UInt32', data: 'TData', dataSerializer: 'System.Action[System.Reflection.Metadata.BlobBuilder, TData]') -> None: ...
    @overload
    def AddCodeViewEntry(self, pdbPath: 'str', pdbContentId: 'System.Reflection.Metadata.BlobContentId', portablePdbVersion: 'System.UInt16') -> None: ...
    @overload
    def AddCodeViewEntry(self, pdbPath: 'str', pdbContentId: 'System.Reflection.Metadata.BlobContentId', portablePdbVersion: 'System.UInt16', age: 'int') -> None: ...
    def AddReproducibleEntry(self) -> None: ...
    def AddPdbChecksumEntry(self, algorithmName: 'str', checksum: 'System.Collections.Immutable.ImmutableArray[int]') -> None: ...
    def AddEmbeddedPortablePdbEntry(self, debugMetadata: 'System.Reflection.Metadata.BlobBuilder', portablePdbVersion: 'System.UInt16') -> None: ...

class PdbChecksumDebugDirectoryData(System.ValueType):
    AlgorithmName: 'str' = ...
    Checksum: 'System.Collections.Immutable.ImmutableArray[int]' = ...

class PEDirectoriesBuilder:
    def __init__(self) -> None: ...
    AddressOfEntryPoint: 'int' = ...
    ExportTable: 'System.Reflection.PortableExecutable.DirectoryEntry' = ...
    ImportTable: 'System.Reflection.PortableExecutable.DirectoryEntry' = ...
    ResourceTable: 'System.Reflection.PortableExecutable.DirectoryEntry' = ...
    ExceptionTable: 'System.Reflection.PortableExecutable.DirectoryEntry' = ...
    BaseRelocationTable: 'System.Reflection.PortableExecutable.DirectoryEntry' = ...
    DebugTable: 'System.Reflection.PortableExecutable.DirectoryEntry' = ...
    CopyrightTable: 'System.Reflection.PortableExecutable.DirectoryEntry' = ...
    GlobalPointerTable: 'System.Reflection.PortableExecutable.DirectoryEntry' = ...
    ThreadLocalStorageTable: 'System.Reflection.PortableExecutable.DirectoryEntry' = ...
    LoadConfigTable: 'System.Reflection.PortableExecutable.DirectoryEntry' = ...
    BoundImportTable: 'System.Reflection.PortableExecutable.DirectoryEntry' = ...
    ImportAddressTable: 'System.Reflection.PortableExecutable.DirectoryEntry' = ...
    DelayImportTable: 'System.Reflection.PortableExecutable.DirectoryEntry' = ...
    CorHeaderTable: 'System.Reflection.PortableExecutable.DirectoryEntry' = ...

class PEHeaderBuilder:
    def __init__(self, machine: 'System.Reflection.PortableExecutable.Machine', sectionAlignment: 'int', fileAlignment: 'int', imageBase: 'System.UInt64', majorLinkerVersion: 'int', minorLinkerVersion: 'int', majorOperatingSystemVersion: 'System.UInt16', minorOperatingSystemVersion: 'System.UInt16', majorImageVersion: 'System.UInt16', minorImageVersion: 'System.UInt16', majorSubsystemVersion: 'System.UInt16', minorSubsystemVersion: 'System.UInt16', subsystem: 'System.Reflection.PortableExecutable.Subsystem', dllCharacteristics: 'System.Reflection.PortableExecutable.DllCharacteristics', imageCharacteristics: 'System.Reflection.PortableExecutable.Characteristics', sizeOfStackReserve: 'System.UInt64', sizeOfStackCommit: 'System.UInt64', sizeOfHeapReserve: 'System.UInt64', sizeOfHeapCommit: 'System.UInt64') -> None: ...
    Machine: 'System.Reflection.PortableExecutable.Machine' = ...
    ImageCharacteristics: 'System.Reflection.PortableExecutable.Characteristics' = ...
    MajorLinkerVersion: 'int' = ...
    MinorLinkerVersion: 'int' = ...
    ImageBase: 'System.UInt64' = ...
    SectionAlignment: 'int' = ...
    FileAlignment: 'int' = ...
    MajorOperatingSystemVersion: 'System.UInt16' = ...
    MinorOperatingSystemVersion: 'System.UInt16' = ...
    MajorImageVersion: 'System.UInt16' = ...
    MinorImageVersion: 'System.UInt16' = ...
    MajorSubsystemVersion: 'System.UInt16' = ...
    MinorSubsystemVersion: 'System.UInt16' = ...
    Subsystem: 'System.Reflection.PortableExecutable.Subsystem' = ...
    DllCharacteristics: 'System.Reflection.PortableExecutable.DllCharacteristics' = ...
    SizeOfStackReserve: 'System.UInt64' = ...
    SizeOfStackCommit: 'System.UInt64' = ...
    SizeOfHeapReserve: 'System.UInt64' = ...
    SizeOfHeapCommit: 'System.UInt64' = ...
    @staticmethod
    def CreateExecutableHeader() -> 'System.Reflection.PortableExecutable.PEHeaderBuilder': ...
    @staticmethod
    def CreateLibraryHeader() -> 'System.Reflection.PortableExecutable.PEHeaderBuilder': ...

class ResourceSectionBuilder:
    pass

class SectionLocation(System.ValueType):
    def __init__(self, relativeVirtualAddress: 'int', pointerToRawData: 'int') -> None: ...
    RelativeVirtualAddress: 'int' = ...
    PointerToRawData: 'int' = ...

class CoffHeader:
    Machine: 'System.Reflection.PortableExecutable.Machine' = ...
    NumberOfSections: 'System.Int16' = ...
    TimeDateStamp: 'int' = ...
    PointerToSymbolTable: 'int' = ...
    NumberOfSymbols: 'int' = ...
    SizeOfOptionalHeader: 'System.Int16' = ...
    Characteristics: 'System.Reflection.PortableExecutable.Characteristics' = ...

class CorFlags(enum.Enum):
    ILOnly = ...
    Requires32Bit = ...
    ILLibrary = ...
    StrongNameSigned = ...
    NativeEntryPoint = ...
    TrackDebugData = ...
    Prefers32Bit = ...

class CorHeader:
    MajorRuntimeVersion: 'System.UInt16' = ...
    MinorRuntimeVersion: 'System.UInt16' = ...
    MetadataDirectory: 'System.Reflection.PortableExecutable.DirectoryEntry' = ...
    Flags: 'System.Reflection.PortableExecutable.CorFlags' = ...
    EntryPointTokenOrRelativeVirtualAddress: 'int' = ...
    ResourcesDirectory: 'System.Reflection.PortableExecutable.DirectoryEntry' = ...
    StrongNameSignatureDirectory: 'System.Reflection.PortableExecutable.DirectoryEntry' = ...
    CodeManagerTableDirectory: 'System.Reflection.PortableExecutable.DirectoryEntry' = ...
    VtableFixupsDirectory: 'System.Reflection.PortableExecutable.DirectoryEntry' = ...
    ExportAddressTableJumpsDirectory: 'System.Reflection.PortableExecutable.DirectoryEntry' = ...
    ManagedNativeHeaderDirectory: 'System.Reflection.PortableExecutable.DirectoryEntry' = ...

class CodeViewDebugDirectoryData(System.ValueType):
    Guid: 'str' = ...
    Age: 'int' = ...
    Path: 'str' = ...

class DebugDirectoryEntry(System.ValueType):
    def __init__(self, stamp: 'System.UInt32', majorVersion: 'System.UInt16', minorVersion: 'System.UInt16', type: 'System.Reflection.PortableExecutable.DebugDirectoryEntryType', dataSize: 'int', dataRelativeVirtualAddress: 'int', dataPointer: 'int') -> None: ...
    Stamp: 'System.UInt32' = ...
    MajorVersion: 'System.UInt16' = ...
    MinorVersion: 'System.UInt16' = ...
    Type: 'System.Reflection.PortableExecutable.DebugDirectoryEntryType' = ...
    DataSize: 'int' = ...
    DataRelativeVirtualAddress: 'int' = ...
    DataPointer: 'int' = ...
    IsPortableCodeView: 'bool' = ...

class DebugDirectoryEntryType(enum.Enum):
    Unknown = ...
    Coff = ...
    CodeView = ...
    Reproducible = ...
    EmbeddedPortablePdb = ...
    PdbChecksum = ...

class DirectoryEntry(System.ValueType):
    def __init__(self, relativeVirtualAddress: 'int', size: 'int') -> None: ...
    RelativeVirtualAddress: 'int' = ...
    Size: 'int' = ...

class Machine(enum.Enum):
    Unknown = ...
    I386 = ...
    WceMipsV2 = ...
    Alpha = ...
    SH3 = ...
    SH3Dsp = ...
    SH3E = ...
    SH4 = ...
    SH5 = ...
    Arm = ...
    Thumb = ...
    ArmThumb2 = ...
    AM33 = ...
    PowerPC = ...
    PowerPCFP = ...
    IA64 = ...
    MIPS16 = ...
    Alpha64 = ...
    MipsFpu = ...
    MipsFpu16 = ...
    Tricore = ...
    Ebc = ...
    RiscV32 = ...
    RiscV64 = ...
    RiscV128 = ...
    LoongArch32 = ...
    LoongArch64 = ...
    Amd64 = ...
    M32R = ...
    Arm64 = ...

class Characteristics(enum.Enum):
    RelocsStripped = ...
    ExecutableImage = ...
    LineNumsStripped = ...
    LocalSymsStripped = ...
    AggressiveWSTrim = ...
    LargeAddressAware = ...
    BytesReversedLo = ...
    Bit32Machine = ...
    DebugStripped = ...
    RemovableRunFromSwap = ...
    NetRunFromSwap = ...
    System = ...
    Dll = ...
    UpSystemOnly = ...
    BytesReversedHi = ...

class PEMagic(enum.Enum):
    PE32 = ...
    PE32Plus = ...

class Subsystem(enum.Enum):
    Unknown = ...
    Native = ...
    WindowsGui = ...
    WindowsCui = ...
    OS2Cui = ...
    PosixCui = ...
    NativeWindows = ...
    WindowsCEGui = ...
    EfiApplication = ...
    EfiBootServiceDriver = ...
    EfiRuntimeDriver = ...
    EfiRom = ...
    Xbox = ...
    WindowsBootApplication = ...

class DllCharacteristics(enum.Enum):
    ProcessInit = ...
    ProcessTerm = ...
    ThreadInit = ...
    ThreadTerm = ...
    HighEntropyVirtualAddressSpace = ...
    DynamicBase = ...
    ForceIntegrity = ...
    NxCompatible = ...
    NoIsolation = ...
    NoSeh = ...
    NoBind = ...
    AppContainer = ...
    WdmDriver = ...
    ControlFlowGuard = ...
    TerminalServerAware = ...

class SectionCharacteristics(enum.Enum):
    TypeReg = ...
    TypeDSect = ...
    TypeNoLoad = ...
    TypeGroup = ...
    TypeNoPad = ...
    TypeCopy = ...
    ContainsCode = ...
    ContainsInitializedData = ...
    ContainsUninitializedData = ...
    LinkerOther = ...
    LinkerInfo = ...
    TypeOver = ...
    LinkerRemove = ...
    LinkerComdat = ...
    MemProtected = ...
    NoDeferSpecExc = ...
    GPRel = ...
    MemFardata = ...
    MemSysheap = ...
    MemPurgeable = ...
    Mem16Bit = ...
    MemLocked = ...
    MemPreload = ...
    Align1Bytes = ...
    Align2Bytes = ...
    Align4Bytes = ...
    Align8Bytes = ...
    Align16Bytes = ...
    Align32Bytes = ...
    Align64Bytes = ...
    Align128Bytes = ...
    Align256Bytes = ...
    Align512Bytes = ...
    Align1024Bytes = ...
    Align2048Bytes = ...
    Align4096Bytes = ...
    Align8192Bytes = ...
    AlignMask = ...
    LinkerNRelocOvfl = ...
    MemDiscardable = ...
    MemNotCached = ...
    MemNotPaged = ...
    MemShared = ...
    MemExecute = ...
    MemRead = ...
    MemWrite = ...

class PEHeader:
    Magic: 'System.Reflection.PortableExecutable.PEMagic' = ...
    MajorLinkerVersion: 'int' = ...
    MinorLinkerVersion: 'int' = ...
    SizeOfCode: 'int' = ...
    SizeOfInitializedData: 'int' = ...
    SizeOfUninitializedData: 'int' = ...
    AddressOfEntryPoint: 'int' = ...
    BaseOfCode: 'int' = ...
    BaseOfData: 'int' = ...
    ImageBase: 'System.UInt64' = ...
    SectionAlignment: 'int' = ...
    FileAlignment: 'int' = ...
    MajorOperatingSystemVersion: 'System.UInt16' = ...
    MinorOperatingSystemVersion: 'System.UInt16' = ...
    MajorImageVersion: 'System.UInt16' = ...
    MinorImageVersion: 'System.UInt16' = ...
    MajorSubsystemVersion: 'System.UInt16' = ...
    MinorSubsystemVersion: 'System.UInt16' = ...
    SizeOfImage: 'int' = ...
    SizeOfHeaders: 'int' = ...
    CheckSum: 'System.UInt32' = ...
    Subsystem: 'System.Reflection.PortableExecutable.Subsystem' = ...
    DllCharacteristics: 'System.Reflection.PortableExecutable.DllCharacteristics' = ...
    SizeOfStackReserve: 'System.UInt64' = ...
    SizeOfStackCommit: 'System.UInt64' = ...
    SizeOfHeapReserve: 'System.UInt64' = ...
    SizeOfHeapCommit: 'System.UInt64' = ...
    NumberOfRvaAndSizes: 'int' = ...
    ExportTableDirectory: 'System.Reflection.PortableExecutable.DirectoryEntry' = ...
    ImportTableDirectory: 'System.Reflection.PortableExecutable.DirectoryEntry' = ...
    ResourceTableDirectory: 'System.Reflection.PortableExecutable.DirectoryEntry' = ...
    ExceptionTableDirectory: 'System.Reflection.PortableExecutable.DirectoryEntry' = ...
    CertificateTableDirectory: 'System.Reflection.PortableExecutable.DirectoryEntry' = ...
    BaseRelocationTableDirectory: 'System.Reflection.PortableExecutable.DirectoryEntry' = ...
    DebugTableDirectory: 'System.Reflection.PortableExecutable.DirectoryEntry' = ...
    CopyrightTableDirectory: 'System.Reflection.PortableExecutable.DirectoryEntry' = ...
    GlobalPointerTableDirectory: 'System.Reflection.PortableExecutable.DirectoryEntry' = ...
    ThreadLocalStorageTableDirectory: 'System.Reflection.PortableExecutable.DirectoryEntry' = ...
    LoadConfigTableDirectory: 'System.Reflection.PortableExecutable.DirectoryEntry' = ...
    BoundImportTableDirectory: 'System.Reflection.PortableExecutable.DirectoryEntry' = ...
    ImportAddressTableDirectory: 'System.Reflection.PortableExecutable.DirectoryEntry' = ...
    DelayImportTableDirectory: 'System.Reflection.PortableExecutable.DirectoryEntry' = ...
    CorHeaderTableDirectory: 'System.Reflection.PortableExecutable.DirectoryEntry' = ...

class PEHeaders:
    @overload
    def __init__(self, peStream: 'System.IO.Stream') -> None: ...
    @overload
    def __init__(self, peStream: 'System.IO.Stream', size: 'int') -> None: ...
    @overload
    def __init__(self, peStream: 'System.IO.Stream', size: 'int', isLoadedImage: 'bool') -> None: ...
    MetadataStartOffset: 'int' = ...
    MetadataSize: 'int' = ...
    CoffHeader: 'System.Reflection.PortableExecutable.CoffHeader' = ...
    CoffHeaderStartOffset: 'int' = ...
    IsCoffOnly: 'bool' = ...
    PEHeader: 'System.Reflection.PortableExecutable.PEHeader' = ...
    PEHeaderStartOffset: 'int' = ...
    SectionHeaders: 'System.Collections.Immutable.ImmutableArray[System.Reflection.PortableExecutable.SectionHeader]' = ...
    CorHeader: 'System.Reflection.PortableExecutable.CorHeader' = ...
    CorHeaderStartOffset: 'int' = ...
    IsConsoleApplication: 'bool' = ...
    IsDll: 'bool' = ...
    IsExe: 'bool' = ...
    def TryGetDirectoryOffset(self, directory: 'System.Reflection.PortableExecutable.DirectoryEntry') -> Tuple['bool', 'System.Int32']: ...
    def GetContainingSectionIndex(self, relativeVirtualAddress: 'int') -> 'int': ...

class PEMemoryBlock(System.ValueType):
    Pointer: 'System.Byte*' = ...
    Length: 'int' = ...
    @overload
    def GetReader(self) -> 'System.Reflection.Metadata.BlobReader': ...
    @overload
    def GetReader(self, start: 'int', length: 'int') -> 'System.Reflection.Metadata.BlobReader': ...
    @overload
    def GetContent(self) -> 'System.Collections.Immutable.ImmutableArray[int]': ...
    @overload
    def GetContent(self, start: 'int', length: 'int') -> 'System.Collections.Immutable.ImmutableArray[int]': ...

class PEReader(System.IDisposable):
    @overload
    def __init__(self, peImage: 'System.Byte*', size: 'int') -> None: ...
    @overload
    def __init__(self, peImage: 'System.Byte*', size: 'int', isLoadedImage: 'bool') -> None: ...
    @overload
    def __init__(self, peStream: 'System.IO.Stream') -> None: ...
    @overload
    def __init__(self, peStream: 'System.IO.Stream', options: 'System.Reflection.PortableExecutable.PEStreamOptions') -> None: ...
    @overload
    def __init__(self, peStream: 'System.IO.Stream', options: 'System.Reflection.PortableExecutable.PEStreamOptions', size: 'int') -> None: ...
    @overload
    def __init__(self, peImage: 'System.Collections.Immutable.ImmutableArray[int]') -> None: ...
    IsLoadedImage: 'bool' = ...
    PEHeaders: 'System.Reflection.PortableExecutable.PEHeaders' = ...
    IsEntireImageAvailable: 'bool' = ...
    HasMetadata: 'bool' = ...
    def Dispose(self) -> None: ...
    def GetEntireImage(self) -> 'System.Reflection.PortableExecutable.PEMemoryBlock': ...
    def GetMetadata(self) -> 'System.Reflection.PortableExecutable.PEMemoryBlock': ...
    @overload
    def GetSectionData(self, relativeVirtualAddress: 'int') -> 'System.Reflection.PortableExecutable.PEMemoryBlock': ...
    @overload
    def GetSectionData(self, sectionName: 'str') -> 'System.Reflection.PortableExecutable.PEMemoryBlock': ...
    def ReadDebugDirectory(self) -> 'System.Collections.Immutable.ImmutableArray[System.Reflection.PortableExecutable.DebugDirectoryEntry]': ...
    def ReadCodeViewDebugDirectoryData(self, entry: 'System.Reflection.PortableExecutable.DebugDirectoryEntry') -> 'System.Reflection.PortableExecutable.CodeViewDebugDirectoryData': ...
    def ReadPdbChecksumDebugDirectoryData(self, entry: 'System.Reflection.PortableExecutable.DebugDirectoryEntry') -> 'System.Reflection.PortableExecutable.PdbChecksumDebugDirectoryData': ...
    def TryOpenAssociatedPortablePdb(self, peImagePath: 'str', pdbFileStreamProvider: 'System.Func[str, System.IO.Stream]') -> Tuple['bool', 'System.Reflection.Metadata.MetadataReaderProvider', 'System.String']: ...
    def ReadEmbeddedPortablePdbDebugDirectoryData(self, entry: 'System.Reflection.PortableExecutable.DebugDirectoryEntry') -> 'System.Reflection.Metadata.MetadataReaderProvider': ...

class PEStreamOptions(enum.Enum):
    Default = ...
    LeaveOpen = ...
    PrefetchMetadata = ...
    PrefetchEntireImage = ...
    IsLoadedImage = ...

class SectionHeader(System.ValueType):
    Name: 'str' = ...
    VirtualSize: 'int' = ...
    VirtualAddress: 'int' = ...
    SizeOfRawData: 'int' = ...
    PointerToRawData: 'int' = ...
    PointerToRelocations: 'int' = ...
    PointerToLineNumbers: 'int' = ...
    NumberOfRelocations: 'System.UInt16' = ...
    NumberOfLineNumbers: 'System.UInt16' = ...
    SectionCharacteristics: 'System.Reflection.PortableExecutable.SectionCharacteristics' = ...

